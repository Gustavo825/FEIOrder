import{Q as x}from"./QImg.1adcfd5b.js";import{A as g,B as h,C as o,D as e,an as Q,ah as r,G as f,F as P,Q as N,ao as A,ap as E,s as D,K as c,aq as I,ar as R,as as U,I as T,ag as L,r as m,at as _,au as $,E as O,_ as F,av as K}from"./index.8d0d3872.js";import{u as M}from"./use-quasar.11bce999.js";import{u as q}from"./notifyHook.09c869bb.js";import{C as w}from"./ClosePopup.dbcb7b2b.js";import{Q as G}from"./QSelect.e2af1588.js";import{Q as J}from"./QFile.20cf29ac.js";import{Q as j}from"./QForm.8f6a78c6.js";const z={class:"row no-wrap items-center"},H={class:"col text-h6 ellipsis"},W={class:"col-auto text-grey text-caption q-pt-md row no-wrap items-center"},X={class:"text-subtitle1"},Y={class:"text-caption text-grey"},B={__name:"InfoDish",props:{card:Boolean,dish:[]},emits:"close",setup(s,{emit:b}){return(u,i)=>(g(),h(U,{modelValue:s.card,"onUpdate:modelValue":i[0]||(i[0]=l=>R(card)?card.value=l:null),persistent:""},{default:o(()=>[e(I,{class:"my-card"},{default:o(()=>[e(x,{src:s.dish.image},null,8,["src"]),e(Q,null,{default:o(()=>[r("div",z,[r("div",H,f(s.dish.title),1),r("div",W,[P(f(s.dish.timeToCook)+" minutos ",1),e(N,{name:"alarm"})])])]),_:1}),e(Q,{class:"q-pt-none"},{default:o(()=>[r("div",X,"$ "+f(s.dish.cost),1),r("div",Y,f(s.dish.description),1)]),_:1}),e(A),e(E,{align:"right"},{default:o(()=>[D(e(c,{flat:"",color:"primary",icon:"close",label:"Cerrar"},null,512),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};const Z={class:"row no-wrap items-center card-section"},ee={class:"row no-wrap items-center card-section"},ae={__name:"EditDish",props:{card:Boolean,dishEdit:[]},emits:"close",setup(s,{emit:b}){const u=s;T();const i=L(),l=m([]),n=m(""),y=m(""),p=m(""),v=m(""),k=["Men\xFA general","Desayunos","Bebidas","Promoci\xF3n"];switch(l.value=JSON.parse(JSON.stringify(u.dishEdit)),l.value.type){case"GENERAL":n.value="Men\xFA general";break;case"BREAKFAST":n.value="Desayunos";break;case"DRINK":n.value="Bebidas";break;case"SALE":n.value="Promoci\xF3n";break}const S=()=>{l.value=JSON.parse(JSON.stringify(u.dishEdit)),b("close")},C=async()=>{if(await y.value.validate())try{let d="";switch(n.value){case"Men\xFA general":d="GENERAL";break;case"Desayunos":d="BREAKFAST";break;case"Bebidas":d="DRINK";break;case"Promoci\xF3n":d="SALE";break}p.value&&i.updateImage(v,u.dishEdit._id),p.value="",await i.updateDish(u.dishEdit._id,l.value.title,l.value.cost,l.value.description,l.value.timeToCook,d),i.getDishes(),b("close")}catch(d){console.log(d)}},V=()=>{p.value=URL.createObjectURL(v.value)};return(d,t)=>(g(),h(U,{class:"dialog",modelValue:s.card,"onUpdate:modelValue":t[8]||(t[8]=a=>R(card)?card.value=a:null),persistent:""},{default:o(()=>[l.value?(g(),h(I,{key:0,class:"my-card"},{default:o(()=>[e(x,{src:s.dishEdit.image},null,8,["src"]),e(j,{class:"form-register-dish",onSubmit:$(C,["prevent"]),ref_key:"form",ref:y},{default:o(()=>[e(Q,null,{default:o(()=>[r("div",Z,[e(_,{class:"col text-h6 ellipsis",modelValue:l.value.title,"onUpdate:modelValue":t[0]||(t[0]=a=>l.value.title=a),label:"T\xEDtulo del platillo",rules:[a=>a&&a.length>0||"Por favor escriba algo"]},null,8,["modelValue","rules"])]),r("div",ee,[e(_,{class:"col text-h6 ellipsis",modelValue:l.value.timeToCook,"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.timeToCook=a),label:"Tiempo de preparaci\xF3n en minutos",rules:[a=>/^\d{0,8}(\.\d{1,4})?$/.test(a)||"Por favor, ingrese valores num\xE9ricos",a=>a&&a.length>0||"Ingrese un tiempo v\xE1lido",,]},null,8,["modelValue","rules"])]),e(_,{modelValue:l.value.cost,"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.cost=a),class:"col text-h6 ellipsis card-section",label:"Costo del platillo",rules:[a=>/^\d{0,8}(\.\d{1,4})?$/.test(a)||"Ingrese un costo v\xE1lido",,a=>a&&a.length>0||"Por favor, ingrese valores num\xE9ricos"]},null,8,["modelValue","rules"]),e(_,{modelValue:l.value.description,"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.description=a),class:"col text-h6 ellipsis card-section",label:"Descripci\xF3n del platillo",rules:[a=>a&&a.length>0||"Por favor escriba algo"]},null,8,["modelValue","rules"]),e(G,{class:"form-input card-section",outlined:"",modelValue:n.value,"onUpdate:modelValue":t[4]||(t[4]=a=>n.value=a),options:k,label:"Categor\xEDa"},null,8,["modelValue"]),e(x,{class:"image-from-input card-section",src:p.value},null,8,["src"]),e(J,{outlined:"",class:"input-image card-section",accept:".jpg, image/*",modelValue:v.value,"onUpdate:modelValue":[t[6]||(t[6]=a=>v.value=a),t[7]||(t[7]=a=>V())],label:"Ingrese la imagen del platillo"},{prepend:o(()=>[e(N,{name:"cloud_upload",color:"white",onClick:t[5]||(t[5]=$(()=>{},["stop","prevent"]))})]),_:1},8,["modelValue"])]),_:1}),e(E,{align:"right"},{default:o(()=>[D(e(c,{flat:"",color:"primary",icon:"cancel",label:"Cancelar",onClick:S},null,512),[[w]]),D(e(c,{flat:"",color:"primary",icon:"save",label:"Guardar cambios",type:"submit"},null,512),[[w]])]),_:1})]),_:1},8,["onSubmit"]),e(A)]),_:1})):O("",!0)]),_:1},8,["modelValue"]))}};const le={class:"absolute-bottom"},se={class:"text-h6"},te={class:"text-subtitle2"},oe={__name:"cardIndex",props:{dish:[],isAdmin:Boolean},setup(s){const b=T(),u=K();q();const i=m(!1),l=m(!1),n=M(),y=()=>{i.value=!1},p=()=>{l.value=!1},v=()=>{l.value=!l.value},k=()=>{i.value=!i.value},S=C=>{console.log(C),n.dialog({title:"Confirmaci\xF3n",message:"\xBFQuieres agregar este platillo a tu carrito de compras?",cancel:!0,persistent:!0}).onOk(()=>{u.add(C),b.push("/ShoppingCart")})};return(C,V)=>(g(),h(I,{class:"my-card"},{default:o(()=>[e(x,{class:"image",src:s.dish.image},{default:o(()=>[r("div",le,[r("div",se,f(s.dish.title),1),r("div",te,"Costo: $"+f(s.dish.cost),1)])]),_:1},8,["src"]),s.isAdmin?(g(),h(E,{key:1,align:"right"},{default:o(()=>[e(c,{onClick:v,flat:"",round:"",color:"primary",icon:"edit"}),e(c,{onClick:k,flat:"",round:"",color:"blue",icon:"info"}),e(ae,{onClose:p,dishEdit:s.dish,card:l.value},null,8,["dishEdit","card"]),e(B,{onClose:y,dish:s.dish,card:i.value},null,8,["dish","card"])]),_:1})):(g(),h(E,{key:0,align:"right"},{default:o(()=>[e(c,{disabled:"false",flat:"",round:"",color:"red",icon:"favorite"}),e(c,{onClick:V[0]||(V[0]=d=>S(s.dish)),flat:"",round:"",color:"teal",icon:"shopping_cart"}),e(c,{onClick:k,flat:"",round:"",color:"blue",icon:"info"}),e(B,{onClose:y,dish:s.dish,card:i.value},null,8,["dish","card"])]),_:1}))]),_:1}))}};var ve=F(oe,[["__scopeId","data-v-77138f5c"]]);export{ve as c};
